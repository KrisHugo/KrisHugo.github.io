<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>java代码中静态读取文件信息进行初始化</title>
    <url>/2020/04/05/java%E4%BB%A3%E7%A0%81%E4%B8%AD%E9%9D%99%E6%80%81%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E4%BF%A1%E6%81%AF%E8%BF%9B%E8%A1%8C%E5%88%9D%E5%A7%8B%E5%8C%96/</url>
    <content><![CDATA[<h1 id="java代码中静态读取文件信息进行初始化"><a href="#java代码中静态读取文件信息进行初始化" class="headerlink" title="java代码中静态读取文件信息进行初始化"></a>java代码中静态读取文件信息进行初始化</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Properties pro = <span class="keyword">new</span> Properties();<span class="comment">//专门读取properties文件</span></span><br><span class="line">pro.load(ClassA.class.getClassLoader().getResourcesAsStream("classA.properties"));// 文件位于src目录下</span><br><span class="line">String info = pro.getProperty(<span class="string">"info"</span>);<span class="comment">//获取properties文件中的info属性</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>经济学分类以及对比</title>
    <url>/2020/04/05/%E5%BE%AE%E8%A7%82%E7%BB%8F%E6%B5%8E%E5%AD%A6vs%E5%AE%8F%E8%A7%82%E7%BB%8F%E6%B5%8E%E5%AD%A6/</url>
    <content><![CDATA[<h1 id="微观经济学vs宏观经济学"><a href="#微观经济学vs宏观经济学" class="headerlink" title="微观经济学vs宏观经济学"></a>微观经济学vs宏观经济学</h1><table>
<thead>
<tr>
<th>差别</th>
<th>微观经济学</th>
<th>宏观经济学</th>
</tr>
</thead>
<tbody><tr>
<td>市场</td>
<td>某个具体市场</td>
<td>所有的市场</td>
</tr>
<tr>
<td>供给</td>
<td>某个产品的供给</td>
<td>所有供给</td>
</tr>
<tr>
<td>需求</td>
<td>某个产品的需求</td>
<td>所有的需求</td>
</tr>
<tr>
<td>生产者</td>
<td>某个生产者</td>
<td>所有生产者</td>
</tr>
<tr>
<td>价格</td>
<td>某个产品价格</td>
<td>总价格</td>
</tr>
</tbody></table><h1 id="实证经济学vs规范经济学"><a href="#实证经济学vs规范经济学" class="headerlink" title="实证经济学vs规范经济学"></a>实证经济学vs规范经济学</h1><table>
<thead>
<tr>
<th></th>
<th>实证经济学</th>
<th>规范经济学</th>
</tr>
</thead>
<tbody><tr>
<td>研究视角</td>
<td>实际是什么</td>
<td>应该是什么</td>
</tr>
<tr>
<td></td>
<td>对过去解释：实际发生了什么，是怎么发生的。</td>
<td>对过去的判断：已经发生的事情是否应该</td>
</tr>
<tr>
<td></td>
<td>对未来预测：将来会发生什么，是怎么发生的</td>
<td>对未来的判断：应该怎么做</td>
</tr>
<tr>
<td>诊断还是药方</td>
<td>诊断，具有描述性和分析性</td>
<td>药方，具有建议性</td>
</tr>
<tr>
<td>需要预设立场吗</td>
<td>不需要</td>
<td>需要</td>
</tr>
<tr>
<td>存在领域</td>
<td>纯粹的经济理论</td>
<td>经济政策下</td>
</tr>
<tr>
<td>是否正确</td>
<td>一般可以验证，取决于研究方法和技巧</td>
<td>无法客观验证，取决于立场</td>
</tr>
</tbody></table><a id="more"></a>

<h1 id="实证经济学和规范经济学面对收入分配与增长的结论"><a href="#实证经济学和规范经济学面对收入分配与增长的结论" class="headerlink" title="实证经济学和规范经济学面对收入分配与增长的结论"></a>实证经济学和规范经济学面对收入分配与增长的结论</h1><table>
<thead>
<tr>
<th></th>
<th>实证经济学</th>
<th>规范经济学</th>
</tr>
</thead>
<tbody><tr>
<td>收入分配与增长</td>
<td>中国市场化的过程导致了收入分配两极分化</td>
<td>这表明，中国的经济改革存在着缺陷（重视公平）</td>
</tr>
<tr>
<td></td>
<td></td>
<td>尽管如此，这可以接受（重视增长）</td>
</tr>
<tr>
<td></td>
<td>改革带来收入分配差距增大，但这是促进经济增长的必要代价</td>
<td>不需要这样的经济增长</td>
</tr>
<tr>
<td></td>
<td></td>
<td>需要这样的经济增长</td>
</tr>
<tr>
<td></td>
<td>中国市场化的过程未导致收入分配的两极分化</td>
<td>这样的市场化是可取的</td>
</tr>
<tr>
<td></td>
<td></td>
<td>是否如此无关紧要</td>
</tr>
</tbody></table>
<p>实证经济学的结论是客观的，需要验证正确与否</p>
<p>规范经济学的结论取决于预设立场，无法验证</p>
]]></content>
  </entry>
  <entry>
    <title>市场经济vs计划经济</title>
    <url>/2020/04/05/%E5%B8%82%E5%9C%BA%E7%BB%8F%E6%B5%8Evs%E8%AE%A1%E5%88%92%E7%BB%8F%E6%B5%8E/</url>
    <content><![CDATA[<h1 id="市场经济vs计划经济"><a href="#市场经济vs计划经济" class="headerlink" title="市场经济vs计划经济"></a>市场经济vs计划经济</h1><table>
<thead>
<tr>
<th></th>
<th>计划经济</th>
<th>市场经济</th>
</tr>
</thead>
<tbody><tr>
<td>所有制</td>
<td>一般公有</td>
<td>一般私有</td>
</tr>
<tr>
<td>激励机制</td>
<td>公共利益</td>
<td>个人利益</td>
</tr>
<tr>
<td>资源配置引导机制</td>
<td>命令或计划</td>
<td>市场</td>
</tr>
<tr>
<td>决策方式</td>
<td>集中</td>
<td>分权</td>
</tr>
<tr>
<td>经济自由</td>
<td>无</td>
<td>有</td>
</tr>
<tr>
<td>国家干预</td>
<td>干预</td>
<td>不干预</td>
</tr>
<tr>
<td>福利政策</td>
<td>有</td>
<td>无</td>
</tr>
</tbody></table>]]></content>
      <categories>
        <category>课外学习</category>
      </categories>
      <tags>
        <tag>微观经济学</tag>
        <tag>课外学习</tag>
      </tags>
  </entry>
  <entry>
    <title>基于分布式架构的旅游平台开发日志</title>
    <url>/2020/04/03/%E5%9F%BA%E4%BA%8E%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84%E7%9A%84%E6%97%85%E6%B8%B8%E5%B9%B3%E5%8F%B0%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97/</url>
    <content><![CDATA[<h1 id="基于分布式架构的旅游平台开发日志"><a href="#基于分布式架构的旅游平台开发日志" class="headerlink" title="基于分布式架构的旅游平台开发日志"></a>基于分布式架构的旅游平台开发日志</h1><hr><h3 id="2020-4-3"><a href="#2020-4-3" class="headerlink" title="2020.4.3"></a>2020.4.3</h3><p>开始写开发日志</p><p>感觉有必要将问题都整理起来，不然以后遇到还是会捉急。</p><p>开发的进程也要写清楚，这样以后总结起来也会方便很多。</p><p>完成内容：</p><ul>
<li><p>Feign的基本使用，并将Region Service和Hotel Service</p>
</li>
<li><p>Elastic Search的搜索功能方法基础实现完成，关键词搜索和地域搜索都完成了。</p>
</li>
</ul>]]></content>
      <categories>
        <category>Lite-Travel</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>log</tag>
      </tags>
  </entry>
  <entry>
    <title>IK-Analyzer的基本用法</title>
    <url>/2020/04/01/IK-Analyzer/</url>
    <content><![CDATA[<h1 id="IK-Analyzer的基本用法"><a href="#IK-Analyzer的基本用法" class="headerlink" title="IK-Analyzer的基本用法"></a>IK-Analyzer的基本用法</h1><ul>
<li><p>最简单的请求</p>
<p>​    <a href="http://172.16.0.4:9200/_analyze?analyzer=ik_smart&amp;pretty=true&amp;text=Sentence" target="_blank" rel="noopener">http://172.16.0.4:9200/_analyze?analyzer=ik_smart&amp;pretty=true&amp;text=Sentence</a></p>
</li>
<li><p>自定义分词器配置：可设置自定义分词以及停用词汇</p>
<p>​    IKAnalyzer.cfg.xml</p>
</li>
</ul>]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>elasticsearch</tag>
      </tags>
  </entry>
  <entry>
    <title>Kibana学习</title>
    <url>/2020/04/01/Kibana%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5/</url>
    <content><![CDATA[<h1 id="Kibana学习"><a href="#Kibana学习" class="headerlink" title="Kibana学习"></a>Kibana学习</h1><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#获取所有索引库</span></span><br><span class="line"><span class="attr">GET</span> <span class="string">_cat/indices?v</span></span><br><span class="line"></span><br><span class="line"><span class="attr">GET</span> <span class="string">_search</span></span><br><span class="line"><span class="attr">&#123;</span></span><br><span class="line">  <span class="meta">"query"</span>: <span class="string">&#123;</span></span><br><span class="line">    <span class="meta">"match_all"</span>: <span class="string">&#123;&#125;</span></span><br><span class="line">  <span class="attr">&#125;</span></span><br><span class="line"><span class="attr">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#get specific</span></span><br><span class="line"><span class="attr">GET</span> <span class="string">/user/userinfo/6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#get all</span></span><br><span class="line"><span class="attr">GET</span> <span class="string">/user/userinfo/_search</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Sort AND Page</span></span><br><span class="line"><span class="attr">GET</span> <span class="string">/user/userinfo/_search</span></span><br><span class="line"><span class="attr">&#123;</span></span><br><span class="line">  <span class="meta">"query"</span>: <span class="string">&#123;</span></span><br><span class="line">    <span class="meta">"match_all"</span>: <span class="string">&#123;&#125;</span></span><br><span class="line">  <span class="attr">&#125;,</span></span><br><span class="line">  <span class="meta">"sort"</span>: <span class="string">[</span></span><br><span class="line">    <span class="attr">&#123;</span></span><br><span class="line">      <span class="meta">"age"</span>: <span class="string">&#123;</span></span><br><span class="line">        <span class="meta">"order"</span>: <span class="string">"desc"</span></span><br><span class="line">      <span class="attr">&#125;</span></span><br><span class="line">    <span class="attr">&#125;</span></span><br><span class="line">  <span class="attr">],</span></span><br><span class="line">  <span class="meta">"from"</span>: <span class="string">0,</span></span><br><span class="line">  <span class="meta">"size"</span>: <span class="string">3</span></span><br><span class="line"><span class="attr">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Specific Search</span></span><br><span class="line"><span class="attr">GET</span> <span class="string">/user/userinfo/_search</span></span><br><span class="line"><span class="attr">&#123;</span></span><br><span class="line">  <span class="meta">"query"</span>: <span class="string">&#123;</span></span><br><span class="line">    <span class="meta">"match_all"</span>: <span class="string">&#123;</span></span><br><span class="line">      </span><br><span class="line">    <span class="attr">&#125;</span></span><br><span class="line">  <span class="attr">&#125;</span></span><br><span class="line"><span class="attr">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Create new indic</span></span><br><span class="line"><span class="attr">PUT</span> <span class="string">/user</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Create mapping</span></span><br><span class="line"><span class="attr">PUT</span> <span class="string">/user/userinfo/_mapping</span></span><br><span class="line"><span class="attr">&#123;</span></span><br><span class="line">  <span class="meta">"properties"</span>:<span class="string">&#123;</span></span><br><span class="line">    <span class="meta">"name"</span>:<span class="string">&#123;</span></span><br><span class="line">      <span class="meta">"type"</span>:<span class="string">"text",</span></span><br><span class="line">      <span class="meta">"analyzer"</span>: <span class="string">"ik_smart",</span></span><br><span class="line">      <span class="meta">"search_analyzer"</span>: <span class="string">"ik_smart", </span></span><br><span class="line">      <span class="meta">"store"</span>: <span class="string">false</span></span><br><span class="line">    <span class="attr">&#125;,</span></span><br><span class="line">    <span class="meta">"city"</span>:<span class="string">&#123;</span></span><br><span class="line">      <span class="meta">"type"</span>:<span class="string">"text",</span></span><br><span class="line">      <span class="meta">"analyzer"</span>: <span class="string">"ik_smart",</span></span><br><span class="line">      <span class="meta">"search_analyzer"</span>: <span class="string">"ik_smart", </span></span><br><span class="line">      <span class="meta">"store"</span>: <span class="string">false</span></span><br><span class="line">    <span class="attr">&#125;,</span></span><br><span class="line">    <span class="meta">"age"</span>:<span class="string">&#123;</span></span><br><span class="line">      <span class="meta">"type"</span>:<span class="string">"long", </span></span><br><span class="line">      <span class="meta">"store"</span>: <span class="string">false</span></span><br><span class="line">    <span class="attr">&#125;,</span></span><br><span class="line">    <span class="meta">"description"</span>:<span class="string">&#123;</span></span><br><span class="line">      <span class="meta">"type"</span>:<span class="string">"text",</span></span><br><span class="line">      <span class="meta">"analyzer"</span>: <span class="string">"ik_smart",</span></span><br><span class="line">      <span class="meta">"search_analyzer"</span>: <span class="string">"ik_smart", </span></span><br><span class="line">      <span class="meta">"store"</span>: <span class="string">false</span></span><br><span class="line">    <span class="attr">&#125;</span></span><br><span class="line">  <span class="attr">&#125;</span></span><br><span class="line"><span class="attr">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Insert Info</span></span><br><span class="line"><span class="attr">PUT</span> <span class="string">/user/userinfo/1</span></span><br><span class="line"><span class="attr">&#123;</span></span><br><span class="line">  <span class="meta">"name"</span>:<span class="string">"zhangsan",</span></span><br><span class="line">  <span class="meta">"city"</span>:<span class="string">"Guangdong",</span></span><br><span class="line">  <span class="meta">"age"</span>:<span class="string">20,</span></span><br><span class="line">  <span class="meta">"description"</span>:<span class="string">"zhangsan is a boy."</span></span><br><span class="line"><span class="attr">&#125;</span></span><br><span class="line"><span class="comment">#Insert Info</span></span><br><span class="line"><span class="attr">PUT</span> <span class="string">/user/userinfo/2</span></span><br><span class="line"><span class="attr">&#123;</span></span><br><span class="line">  <span class="meta">"name"</span>:<span class="string">"lisi",</span></span><br><span class="line">  <span class="meta">"city"</span>:<span class="string">"Shanghai",</span></span><br><span class="line">  <span class="meta">"age"</span>:<span class="string">19,</span></span><br><span class="line">  <span class="meta">"description"</span>:<span class="string">"lisi is a shanghai boy."</span></span><br><span class="line"><span class="attr">&#125;</span></span><br><span class="line"><span class="comment">#Insert Info</span></span><br><span class="line"><span class="attr">PUT</span> <span class="string">/user/userinfo/3</span></span><br><span class="line"><span class="attr">&#123;</span></span><br><span class="line">  <span class="meta">"name"</span>:<span class="string">"wangwu",</span></span><br><span class="line">  <span class="meta">"city"</span>:<span class="string">"Guangdong",</span></span><br><span class="line">  <span class="meta">"age"</span>:<span class="string">25,</span></span><br><span class="line">  <span class="meta">"description"</span>:<span class="string">"wangwu is a guangdong handsome man."</span></span><br><span class="line"><span class="attr">&#125;</span></span><br><span class="line"><span class="comment">#Insert Info</span></span><br><span class="line"><span class="attr">PUT</span> <span class="string">/user/userinfo/4</span></span><br><span class="line"><span class="attr">&#123;</span></span><br><span class="line">  <span class="meta">"name"</span>:<span class="string">"xiaohong",</span></span><br><span class="line">  <span class="meta">"city"</span>:<span class="string">"Beijing",</span></span><br><span class="line">  <span class="meta">"age"</span>:<span class="string">15,</span></span><br><span class="line">  <span class="meta">"description"</span>:<span class="string">"xiaohong is a Beijing girl."</span></span><br><span class="line"><span class="attr">&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#Insert Info</span></span><br><span class="line"><span class="attr">PUT</span> <span class="string">/user/userinfo/5</span></span><br><span class="line"><span class="attr">&#123;</span></span><br><span class="line">  <span class="meta">"name"</span>:<span class="string">"kris",</span></span><br><span class="line">  <span class="meta">"city"</span>:<span class="string">"American",</span></span><br><span class="line">  <span class="meta">"age"</span>:<span class="string">17,</span></span><br><span class="line">  <span class="meta">"description"</span>:<span class="string">"kris is a sicuan cool boy.",</span></span><br><span class="line">  <span class="meta">"sex"</span>:<span class="string">"boy"</span></span><br><span class="line"><span class="attr">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Insert Info </span></span><br><span class="line"><span class="comment">#Or replace the original info</span></span><br><span class="line"><span class="attr">PUT</span> <span class="string">/user/userinfo/6</span></span><br><span class="line"><span class="attr">&#123;</span></span><br><span class="line">  <span class="meta">"name"</span>:<span class="string">"xiaomei",</span></span><br><span class="line">  <span class="meta">"city"</span>:<span class="string">"sicuan",</span></span><br><span class="line">  <span class="meta">"age"</span>:<span class="string">18,</span></span><br><span class="line">  <span class="meta">"description"</span>:<span class="string">"xiaomei is a sicuan hot girl."</span></span><br><span class="line"><span class="attr">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#update the original info</span></span><br><span class="line"><span class="attr">POST</span> <span class="string">/user/userinfo/6/_update</span></span><br><span class="line"><span class="attr">&#123;</span></span><br><span class="line">  <span class="meta">"doc"</span>: <span class="string">&#123;</span></span><br><span class="line">    <span class="meta">"name"</span>:<span class="string">"rio",</span></span><br><span class="line">    <span class="meta">"age"</span>:<span class="string">23,</span></span><br><span class="line">    <span class="meta">"description"</span>:<span class="string">"rio is a sicuan smart woman"</span></span><br><span class="line">  <span class="attr">&#125;</span></span><br><span class="line"><span class="attr">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#deleted</span></span><br><span class="line"><span class="attr">DELETE</span> <span class="string">/user/userinfo/6</span></span><br></pre></td></tr></table></figure><a id="more"></a>




<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#nested 查询</span></span><br><span class="line"><span class="attr">GET</span> <span class="string">/hotel/_search</span></span><br><span class="line"><span class="attr">&#123;</span></span><br><span class="line">  <span class="meta">"query"</span>: <span class="string">&#123;</span></span><br><span class="line">    <span class="meta">"nested"</span> : <span class="string">&#123;</span></span><br><span class="line">      <span class="meta">"path"</span>: <span class="string">"rooms",</span></span><br><span class="line">      <span class="meta">"query"</span>: <span class="string">&#123;</span></span><br><span class="line">        <span class="meta">"match"</span>: <span class="string">&#123;</span></span><br><span class="line">          <span class="meta">"rooms.roomId"</span>: <span class="string">1</span></span><br><span class="line">        <span class="attr">&#125;</span></span><br><span class="line">      <span class="attr">&#125;</span></span><br><span class="line">    <span class="attr">&#125;</span></span><br><span class="line">  <span class="attr">&#125;</span></span><br><span class="line"><span class="attr">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">GET</span> <span class="string">/hotel/_search</span></span><br><span class="line"><span class="attr">&#123;</span></span><br><span class="line">  <span class="meta">"query"</span>: <span class="string">&#123;</span></span><br><span class="line">    <span class="meta">"bool"</span>: <span class="string">&#123;</span></span><br><span class="line">      <span class="meta">"must"</span>: <span class="string">[</span></span><br><span class="line">        <span class="attr">&#123;</span></span><br><span class="line">          <span class="meta">"nested"</span>: <span class="string">&#123;</span></span><br><span class="line">            <span class="meta">"path"</span>: <span class="string">"rooms",</span></span><br><span class="line">            <span class="meta">"query"</span>: <span class="string">&#123;</span></span><br><span class="line">              <span class="meta">"match"</span>: <span class="string">&#123;</span></span><br><span class="line">                <span class="meta">"rooms.roomBedAdd"</span>: <span class="string">-1</span></span><br><span class="line">              <span class="attr">&#125;</span></span><br><span class="line">            <span class="attr">&#125;</span></span><br><span class="line">          <span class="attr">&#125;</span></span><br><span class="line">        <span class="attr">&#125;</span></span><br><span class="line">      <span class="attr">]</span></span><br><span class="line">    <span class="attr">&#125;</span></span><br><span class="line">  <span class="attr">&#125;</span></span><br><span class="line"><span class="attr">&#125;</span></span><br><span class="line"><span class="attr">GET</span> <span class="string">/hotel/_search</span></span><br><span class="line"><span class="attr">&#123;</span></span><br><span class="line">  <span class="meta">"query"</span>: <span class="string">&#123;</span></span><br><span class="line">    <span class="meta">"match_all"</span>: <span class="string">&#123;&#125;</span></span><br><span class="line">  <span class="attr">&#125;</span></span><br><span class="line"><span class="attr">&#125;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>elasticsearch</tag>
      </tags>
  </entry>
  <entry>
    <title>纯数字文本中获取最大数字</title>
    <url>/2020/04/01/%E7%BA%AF%E6%95%B0%E5%AD%97%E6%96%87%E6%9C%AC%E4%B8%AD%E8%8E%B7%E5%8F%96%E6%9C%80%E5%A4%A7%E6%95%B0%E5%AD%97/</url>
    <content><![CDATA[<h1 id="纯数字文本中获取最大数字"><a href="#纯数字文本中获取最大数字" class="headerlink" title="纯数字文本中获取最大数字"></a>纯数字文本中获取最大数字</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># number.txt</span><br><span class="line"></span><br><span class="line">232</span><br><span class="line">123 456 789</span><br><span class="line">856 45</span><br><span class="line">12</span><br><span class="line">458</span><br><span class="line">65 5 89 654 2123 544</span><br><span class="line">45 88 46 53 64 87 998 112 456 789 654</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 将空格换成换行符</span></span><br><span class="line">cat number.txt |sed 's/ /\n/g'</span><br><span class="line"><span class="meta">#</span><span class="bash"> 以及将空行去掉</span></span><br><span class="line">cat number.txt |sed 's/ /\n/g' |grep -v "^$"</span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加排序</span></span><br><span class="line">cat number.txt |sed 's/ /\n/g' |grep -v "^$" |sort -nr</span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加输出限制，只显示最大和最小的，即在文本中第一位和最后一位的</span></span><br><span class="line">cat number.txt |sed 's/ /\n/g' |grep -v "^$" |sort -nr|sed -n '1p;$p'</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>Shell</tag>
      </tags>
  </entry>
  <entry>
    <title>Apache,MySQL,PHP安装功能函数</title>
    <url>/2020/04/01/Apache%E5%AE%89%E8%A3%85%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<h1 id="Apache-MySQL-PHP安装功能函数"><a href="#Apache-MySQL-PHP安装功能函数" class="headerlink" title="Apache,MySQL,PHP安装功能函数"></a>Apache,MySQL,PHP安装功能函数</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">auto install apache</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">Httpd define path variable</span></span><br><span class="line">H_FILES=httpd-2.2.27.tar.bz2</span><br><span class="line">H_FILES_DIR=httpd-2.2.27</span><br><span class="line">H_URL=http://mirrors.cnnic.cn/apache/htpd/</span><br><span class="line">H_PREFIX=/usr/local/apache2/</span><br><span class="line"><span class="meta">#</span><span class="bash">MySQL</span></span><br><span class="line">M_FILES=...</span><br><span class="line">M_FILES_DIR=...</span><br><span class="line">M_URL=...</span><br><span class="line">M_PREFIX=...</span><br><span class="line"><span class="meta">#</span><span class="bash">PHP</span></span><br><span class="line">P_FILES=...</span><br><span class="line">P_FILES_DIR=...</span><br><span class="line">P_URL=...</span><br><span class="line">P_PREFIX=...</span><br><span class="line"></span><br><span class="line">MODULE=NOTHING</span><br><span class="line"></span><br><span class="line">function Menu()&#123;</span><br><span class="line">	echo "--------------------------------------------------"</span><br><span class="line">	echo "Please choose to install the following optional modules."</span><br><span class="line">    select i in "Apache" "MySQL" "PHP"</span><br><span class="line">    do</span><br><span class="line">        case $i in</span><br><span class="line">            Apache)</span><br><span class="line">            $MODULE=$H_FILES_DIR</span><br><span class="line">            ApacheInstall</span><br><span class="line">            ;;</span><br><span class="line">            MySQL)</span><br><span class="line">            $MODULE=$M_FILES_DIR</span><br><span class="line">            MySQLInstall</span><br><span class="line">            ;;</span><br><span class="line">            PHP)</span><br><span class="line">            $MODULE=$P_FILES_DIR</span><br><span class="line">            PHPInstall</span><br><span class="line">            ;;</span><br><span class="line">            *)</span><br><span class="line">            echo "FOUND NOTHING BY USING SUPPORTED ARGUMENT"</span><br><span class="line">            ;;</span><br><span class="line">    done</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function ApacheInstall()&#123;</span><br><span class="line">	echo "The Apache Server wait install..."</span><br><span class="line">    wget -c $H_URL/$H_FILES &amp;&amp; tar -jxvf &amp;&amp; cd &amp;H_FILES_DIR &amp;&amp; ./configure --prefix=$H_PREFIX</span><br><span class="line">	</span><br><span class="line">    if [ $? -eq 0 ];then</span><br><span class="line">        make &amp;&amp; make install</span><br><span class="line">        echo "--------------------------------------------------"</span><br><span class="line">        echo "$MODULE Server Installation succeed!"</span><br><span class="line">    else</span><br><span class="line">        echo "$MODULE Make or Make install ERROR, Please Check...."</span><br><span class="line">        exit 0</span><br><span class="line">    fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function MySQLInstall()&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function PHPInstall()&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Menu</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>Shell</tag>
      </tags>
  </entry>
  <entry>
    <title>自动备份Mysql Shell脚本</title>
    <url>/2020/04/01/%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BDMysql%20Shell%E8%84%9A%E6%9C%AC/</url>
    <content><![CDATA[<h1 id="自动备份Mysql-Shell脚本"><a href="#自动备份Mysql-Shell脚本" class="headerlink" title="自动备份Mysql Shell脚本"></a>自动备份Mysql Shell脚本</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">auto backup mysql db</span></span><br><span class="line"></span><br><span class="line">BACK_DIR=/data/backup/`date + %y%m%d`</span><br><span class="line">MYSQLDB=discuz</span><br><span class="line">MYSQLUSR=backup</span><br><span class="line">MYSQLPW=123456</span><br><span class="line">MYSQLCMD=/usr/bin/mysqldump</span><br><span class="line">if [ $UID -ne 0];then</span><br><span class="line">	echo "Must to be use root for exec shell"</span><br><span class="line">	exit</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [ ! -d $BAcK_DIR];then</span><br><span class="line">	mkdir -p $BAcK_DIR</span><br><span class="line">	echo "\033[32mThe $BACK_DIR Create Successfully!"</span><br><span class="line">else </span><br><span class="line">	echo "This $BACK_DIR is exists."</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash">MYSQLCMD -u<span class="variable">$MYSQLUSR</span> -p<span class="variable">$MYSQLPW</span> discuz &gt;<span class="variable">$BACK_DIR</span>/<span class="variable">$MYSQLDB</span>.sql</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>Shell</tag>
      </tags>
  </entry>
  <entry>
    <title>Java面试准备</title>
    <url>/2020/03/31/Java%E9%9D%A2%E8%AF%95%E9%A2%98/</url>
    <content><![CDATA[<h1 id="Java面试题"><a href="#Java面试题" class="headerlink" title="Java面试题"></a>Java面试题</h1><ol>
<li>操作数栈的题：</li>
</ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">    i = i++;</span><br><span class="line">    <span class="keyword">int</span> j = i++;</span><br><span class="line">    ink k = i + ++i * i++;</span><br><span class="line">    System.out.println(<span class="string">"i="</span> + i);</span><br><span class="line">    System.out.println(<span class="string">"j="</span> + j);</span><br><span class="line">    System.out.println(<span class="string">"k="</span> + k);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a>


<p>重点：字节码，i++，操作数栈，运算符优先级</p>
<p>=运算符是最后运算的</p>
<p>操作数栈压入参数的顺序是=后从左到右依次压入，而四则运算何时进行并不是依次的，而是要考虑运算符优先级。</p>
<p>+-*/四则运算需要将变量先压入操作数栈在取出操作数栈中的数进行运算后再将临时结果压入操作数栈中，等待取出结果。</p>
<p>++运算符是直接对局部变量表中的变量直接操作的，不经过操作数栈。</p>
<p>结果输出：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">i = <span class="number">4</span></span><br><span class="line">j = <span class="number">1</span></span><br><span class="line">k = <span class="number">11</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>单例模式Singleton</li>
</ol>
<p>特点</p>
<ul>
<li>只能有一个实例<ul>
<li>构造器</li>
</ul>
</li>
<li>必须自行创建实例<ul>
<li>使用一个静态变量来保存这个唯一的实例</li>
</ul>
</li>
<li>必须自行向系统提供该实例<ul>
<li>直接暴露</li>
<li>静态变量的get方法获取</li>
</ul>
</li>
</ul>
<p>常见形式：</p>
<ul>
<li><p>饿汉式：直接创建对象，不存在线程安全问题</p>
<pre><code>- 直接实例化饿汉式（简洁直观）</code></pre><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 不考虑是否需要实例该单例</span></span><br><span class="line"><span class="comment">// 静态变量</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton instance = <span class="keyword">new</span> Singleton();</span><br><span class="line"><span class="comment">// 构造器</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<pre><code>- 枚举式（最简洁）</code></pre><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 表示该类型的对象是有限的几个</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Singleton&#123;</span><br><span class="line">    INSTANCE1,</span><br><span class="line">    INSTANCE2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<pre><code>- 静态代码块饿汉式（适合复杂实例化）</code></pre><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton INSTANCE;</span><br><span class="line"><span class="keyword">static</span>&#123;</span><br><span class="line">    INSTANCE = <span class="keyword">new</span> Singleton();</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">//需要进行一定的初始化</span></span><br><span class="line">    <span class="comment">//或者需要从文件中获取属性值</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>懒汉式：延迟创建对象</p>
<pre><code>- 线程不安全（适用于单线程）</code></pre><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">        instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<pre><code>- 线程安全（适用于多线程）</code></pre><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">    	<span class="keyword">synchronized</span> (Singleton<span class="class">.<span class="keyword">class</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">            &#125;    </span><br><span class="line">        &#125;    </span><br><span class="line">	&#125;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<pre><code>- 静态内部类形式（适用于多线程）</code></pre><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 在内部类加载和初始化时创建的，因此是线程安全的</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Inner</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton INSTANCE = <span class="keyword">new</span> Singleton();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Inner.INSTANCE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>面试</tag>
      </tags>
  </entry>
  <entry>
    <title>使用Docker遇到的问题</title>
    <url>/2020/03/31/%E4%BD%BF%E7%94%A8Docker%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h1 id="使用Docker遇到的问题"><a href="#使用Docker遇到的问题" class="headerlink" title="使用Docker遇到的问题"></a>使用Docker遇到的问题</h1><ol>
<li><p>*<em>Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running? *</em></p>
<p>重新配置daemon，并重启docker</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart docker.service</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ES运行内存不足</strong></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 登陆docker容器进行修改</span></span><br><span class="line"><span class="string">docker</span> <span class="string">exec</span> <span class="string">-it</span> <span class="string">容器名</span> <span class="string">/bin/bash</span></span><br><span class="line"><span class="string">cd</span> <span class="string">../etc/elasticsearch</span></span><br><span class="line"><span class="string">vim</span> <span class="string">jvm.options</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># jvm.options</span></span><br><span class="line"><span class="comment"># 修改-Xms和-Xmx</span></span><br><span class="line"><span class="string">-Xms128m</span></span><br><span class="line"><span class="string">-Xmx128m</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>查看logs</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker container logs 容器名</span><br></pre></td></tr></table></figure>
</li>
<li><p>在容器出现错误时修改内部文件的办法</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">找到docker容器的文件路径</span></span><br><span class="line">find / -name 出现错误的文件名</span><br><span class="line"><span class="meta">#</span><span class="bash">进入并修改文件</span></span><br><span class="line">vim 文件路径</span><br></pre></td></tr></table></figure>



</li>
</ol>]]></content>
      <tags>
        <tag>Shell</tag>
      </tags>
  </entry>
  <entry>
    <title>Change-To-Chinese</title>
    <url>/2020/02/02/Change-To-Chinese/</url>
    <content><![CDATA[<h1 id="简单的网站测试"><a href="#简单的网站测试" class="headerlink" title="简单的网站测试"></a>简单的网站测试</h1><p>测试测试测试</p>]]></content>
      <tags>
        <tag>test</tag>
      </tags>
  </entry>
  <entry>
    <title>Shell 数组</title>
    <url>/2020/02/02/Shell%20%E6%95%B0%E7%BB%84/</url>
    <content><![CDATA[<h1 id="Shell-数组"><a href="#Shell-数组" class="headerlink" title="Shell 数组"></a>Shell 数组</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">soft = (</span><br><span class="line">	nginx-1.6.1.tar.gz</span><br><span class="line">	mysql-5.1.17.tar.gz</span><br><span class="line">	php-5.3.3.tar.gz</span><br><span class="line">	/etc/sysctl.conf</span><br><span class="line">)</span><br><span class="line">echo "tHIS SOFT TOTAL $&#123;#soft[@]&#125; !"</span><br><span class="line">tar -xzf $&#123;soft[0]&#125; ;cd nginx-1.6.1 ;./configure ;make install</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>Shell</tag>
      </tags>
  </entry>
  <entry>
    <title>自动化运维</title>
    <url>/2020/02/02/Shell%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4/</url>
    <content><![CDATA[<h1 id="自动化运维"><a href="#自动化运维" class="headerlink" title="自动化运维"></a>自动化运维</h1><h2 id="1-自动禁止恶意IP访问"><a href="#1-自动禁止恶意IP访问" class="headerlink" title="1. 自动禁止恶意IP访问"></a>1. 自动禁止恶意IP访问</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 从访问记录<span class="built_in">log</span>里获取恶意ip访问信息</span></span><br><span class="line"></span><br><span class="line">SEC_FILE=/var/log/secure</span><br><span class="line"><span class="meta">#</span><span class="bash"> 筛选恶意访问(密码错误多次[&gt;=4次])多次的ip</span></span><br><span class="line">IP_ADDR=`tail -n 1000 $SEC_FILE | grep "Failed password" | egrep -o "([0-9]&#123;1,3&#125;\.)&#123;3&#125;[0-9]&#123;1,3&#125;" | sort -nr | uniq -c | awk ' $1&gt;=4 &#123;print $2&#125;'`</span><br><span class="line">IPTABLE_CONF=/etc/sysconfig/iptables</span><br><span class="line">echo </span><br><span class="line">cat &lt;&lt;EOF</span><br><span class="line">++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><br><span class="line">---------------------welcome to use ssh login drop failed ip------------------</span><br><span class="line">++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><br><span class="line">EOF</span><br><span class="line">for i in `echo $IP_ADDR`</span><br><span class="line">do</span><br><span class="line"><span class="meta">	#</span><span class="bash"> 抓取防火墙中对应的ip信息</span></span><br><span class="line">	cat $IPTABLE_CONF | grep $i &gt;/dev/null</span><br><span class="line">	</span><br><span class="line"><span class="meta">	#</span><span class="bash"> 判断是否已经存在对应ip的拒绝信息, 如存在, 就不添加相应信息</span></span><br><span class="line">	if [ $? -ne 0];then</span><br><span class="line">		sed -i "/lo/a -A INPUT -s $i -m state --state NEW -m tcp -p tcp --dropt 22 -j DROP" $IPTABLE_CONF</span><br><span class="line">	else </span><br><span class="line">		echo "This $i is exists in the iptables."</span><br><span class="line">	fi</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">/etc/init.d/iptables restart</span><br></pre></td></tr></table></figure><a id="more"></a>

<h2 id="2-网络自动化部署以及管理"><a href="#2-网络自动化部署以及管理" class="headerlink" title="2.网络自动化部署以及管理"></a>2.网络自动化部署以及管理</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Auto change Server Files</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 缺少ip.txt</span></span><br><span class="line">if [ ! -f ip.txt ];then</span><br><span class="line">	echo "Please Create ip.txt Files, the ip.txt contents models are as follows: "</span><br><span class="line">	cat &lt;&lt;EOF</span><br><span class="line">	192.168.149.128</span><br><span class="line">	192.168.149.129</span><br><span class="line">	EOF</span><br><span class="line">	exit</span><br><span class="line">fi</span><br><span class="line"><span class="meta">#</span><span class="bash"> 缺少参数</span></span><br><span class="line">if [ -z "$1" ];then</span><br><span class="line">	echo "Usage: $0 command, example&#123;Src_Files|Src_Dir Des_dir&#125;. "</span><br><span class="line">	exit</span><br><span class="line">fi</span><br><span class="line"><span class="meta">#</span><span class="bash"> 抓去ip.txt的行数</span></span><br><span class="line">count='cat ip.txt | wc -l'</span><br><span class="line">rm -rf ip.txt.swp</span><br><span class="line">i=0</span><br><span class="line">while ((i&lt; $count))</span><br><span class="line">do</span><br><span class="line">	i=`expr $i + 1`</span><br><span class="line"><span class="meta">	#</span><span class="bash"> 抓去ip.txt的第<span class="variable">$i</span>行的ip并赋予至ip.txt.swp</span></span><br><span class="line">	sed "$&#123;i&#125;s/^/&amp;$&#123;i&#125; /g" ip.txt &gt;&gt;ip.txt.swp</span><br><span class="line"><span class="meta">	#</span><span class="bash"> 获取需要同步的ip</span></span><br><span class="line">	IP=`awk -v I="$i" '&#123;if(I==$1)print $2&#125;' ip.txt.swp`</span><br><span class="line"><span class="meta">	#</span><span class="bash"> 同步语句	</span></span><br><span class="line">	scp -r $1 root@$&#123;IP&#125;:$2</span><br><span class="line">	</span><br><span class="line">done</span><br></pre></td></tr></table></figure>



<h2 id="3-批量远程服务器执行命令"><a href="#3-批量远程服务器执行命令" class="headerlink" title="3.批量远程服务器执行命令"></a>3.批量远程服务器执行命令</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">if [ ! -f ip.txt ];then</span><br><span class="line">	echo "Please Create ip.txt Files, the ip.txt contents models are as follows: "</span><br><span class="line">	cat &lt;&lt;EOF</span><br><span class="line">	192.168.149.128</span><br><span class="line">	192.168.149.129</span><br><span class="line">	EOF</span><br><span class="line">	exit</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [ -z "$*" ];then</span><br><span class="line">	echo "Usage: $0 command, example &#123;rm /tmp/test.txt | mkdir /tmp/20140228&#125;"</span><br><span class="line">	exit</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">count='cat ip.txt | wc -l'</span><br><span class="line">rm -rf ip.txt.swp</span><br><span class="line">i=0</span><br><span class="line">while ((i&lt; $count))</span><br><span class="line">do</span><br><span class="line">	i=`expr $i + 1`</span><br><span class="line"><span class="meta">	#</span><span class="bash"> 抓去ip.txt的第<span class="variable">$i</span>行的ip并赋予至ip.txt.swp</span></span><br><span class="line">	sed "$&#123;i&#125;s/^/&amp;$&#123;i&#125; /g" ip.txt &gt;&gt;ip.txt.swp</span><br><span class="line"><span class="meta">	#</span><span class="bash"> 获取需要同步的ip</span></span><br><span class="line">	IP=`awk -v I="$i" '&#123;if(I==$1)print $2&#125;' ip.txt.swp`</span><br><span class="line"><span class="meta">	#</span><span class="bash"> 命令语句, 并输出操作返回结果</span></span><br><span class="line">	ssh -q -l root $IP "$*";echo "The $IP Execution Command: $* succeed";sleep 2"	</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h2 id="4-Rsync-SSH批量自动化部署"><a href="#4-Rsync-SSH批量自动化部署" class="headerlink" title="4.Rsync+SSH批量自动化部署"></a>4.Rsync+SSH批量自动化部署</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 刷新函数</span></span><br><span class="line">flush()&#123;</span><br><span class="line">	if [ ! -f rsync.list ];then</span><br><span class="line">		echo "Please Create rsync.list Files, the rsync.list contents should be look like as follow:"</span><br><span class="line">		cat &lt;&lt;EOF</span><br><span class="line">		192.168.149.128 src_dir des_dir</span><br><span class="line">		192.168.149.127 src_dir des_dir</span><br><span class="line">		EOF</span><br><span class="line">		exit</span><br><span class="line">	fi</span><br><span class="line">	</span><br><span class="line">	rm -rf rsync.list.swp ; cat rsync.list | grep -v "#" &gt;rsync.list.swp</span><br><span class="line">	COUNT=`cat rsync.list.swp | wc -l`</span><br><span class="line">	i=0</span><br><span class="line">	while (($&#123;i&#125; &lt; $COUNT))</span><br><span class="line">	do</span><br><span class="line">		i = `expr $i + 1`</span><br><span class="line">		Line=`sed -n "$&#123;i&#125;p" rsync.list.swp`</span><br><span class="line">		IP=`echo $Line | awk '&#123;print $1&#125;'`</span><br><span class="line">		SRC=`echo $Line | awk '&#123;print $2&#125;'`</span><br><span class="line">		DES=`echo $Line | awk '&#123;print $3&#125;'`</span><br><span class="line">		rsync -ap --delete $&#123;SRC&#125;/ root@$&#123;IP&#125;:$&#123;DES&#125;/</span><br><span class="line">	done</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重启</span></span><br><span class="line">restart()&#123;</span><br><span class="line">	if [ ! -f restart.list ];then</span><br><span class="line">		echo "Please Create restart.list Files, the rsync.list contents should be look like as follow:"</span><br><span class="line">		cat &lt;&lt;EOF</span><br><span class="line">		192.168.149.128 Command</span><br><span class="line">		192.168.149.127 Command</span><br><span class="line">		EOF</span><br><span class="line">		exit</span><br><span class="line">	fi</span><br><span class="line">	rm -rf restart.list.swp ; cat restart.list | grep -v "#" &gt;&gt;restart.list.swp</span><br><span class="line">	COUNT=`cat restart.list.swp | wc -l`</span><br><span class="line">	i=0</span><br><span class="line">	while (($&#123;i&#125; &lt; $COUNT))</span><br><span class="line">	do</span><br><span class="line">		i = `expr $i + 1`</span><br><span class="line">		Line=`sed -n "$&#123;i&#125;p" restart.list.swp`</span><br><span class="line">		IP=`echo $Line | awk '&#123;print $1&#125;'`</span><br><span class="line">		Command=`echo $Line | awk '&#123;print $2&#125;'`</span><br><span class="line">		ssh -l root $IP "sh $Command;echo 'The $IP Exec Command and : sh $Command success'"</span><br><span class="line">	done	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">case $i in </span><br><span class="line">	flush )</span><br><span class="line">	flush</span><br><span class="line">	;;</span><br><span class="line">	restart )</span><br><span class="line">	restart</span><br><span class="line">	;;</span><br><span class="line">	*)</span><br><span class="line">	echo "Usage: $0 command, example&#123;flush|restart&#125;"</span><br></pre></td></tr></table></figure>

<h2 id="4-增量备份脚本"><a href="#4-增量备份脚本" class="headerlink" title="4.增量备份脚本"></a>4.增量备份脚本</h2><ul>
<li><p>完整备份</p>
<p>完整的将文件全部备份</p>
<p>tar -g /tmp/snapshot -czvf /tmp/2014_full_system_data.tar.gz /data/sh/</p>
</li>
<li><p>增量备份</p>
<p>将新增的文件进行备份</p>
<p>tar -g /tmp/snapshot -czvf /tmp/2014_add01_system_data.tar.gz /data/sh/</p>
</li>
</ul>
<p><strong>一般是周日进行完整备份，每天进行一次增量备份</strong></p>
<p>定时备份：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">确定今天是周几: date +%u</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 所有文件</span></span><br><span class="line">SOURCE_DIR=(</span><br><span class="line"><span class="meta">	$</span><span class="bash">*</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">TARGET_DIR=/data/backup/</span><br><span class="line"></span><br><span class="line">YEAR=`date +%Y`</span><br><span class="line">MONTH=`date +%m`</span><br><span class="line">DAY=`date +%d`</span><br><span class="line">WEEK=`date +%u`</span><br><span class="line">A_NAME=`date +%H%M`</span><br><span class="line">FILES=$&#123;A_NAME&#125;_system_backup.tgz</span><br><span class="line">CODE=$?</span><br><span class="line"></span><br><span class="line">if [ -z "$*" ];then</span><br><span class="line">	echo "Please Enter Your Backup Files or Directories"</span><br><span class="line">	echo "Usage: &#123; $0 /boot /etc &#125;"</span><br><span class="line">	exit</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [ ! -d $TARGET_DIR/$YEAR/$MONTH/$DAY ];then</span><br><span class="line">	mkdir -p $TARGET_DIR/$YEAR/$MONTH/$DAY</span><br><span class="line">	echo "The $TARGET_DIR Created success"</span><br><span class="line">fi</span><br><span class="line">Full_Backup()&#123;</span><br><span class="line">	if [ "$WEEK" -eq "7" ];then</span><br><span class="line">		rm -rf $TARGET_DIR/snapshot</span><br><span class="line">		cd $TARGET_DIR/$YEAR/$MONTH/$DAY ;tar -g $TARGET_DIR/snapshot -czvf $FILES $&#123;SOURCE_DIR[@]&#125;</span><br><span class="line">		[ "$CODE" == "0" ]&amp;&amp;echo "These Full_backup System Files $TARGET_DIR/$YEAR/$MONTH/$DAY/$FILES Backup Success"</span><br><span class="line">	fi</span><br><span class="line">&#125;</span><br><span class="line">Add_Backup()&#123;</span><br><span class="line">	if [ "$WEEK" -ne "7" ];then</span><br><span class="line">		cd $TARGET_DIR/$YEAR/$MONTH/$DAY ;tar -g $TARGET_DIR/snapshot -czvf $FILES $&#123;SOURCE_DIR[@]&#125;</span><br><span class="line">		[ "$CODE" == "0" ]&amp;&amp;echo "These Add_backup System Files $TARGET_DIR/$YEAR/$MONTH/$DAY/$FILES Backup Success"</span><br><span class="line">	fi</span><br><span class="line">&#125;</span><br><span class="line">sleep 3</span><br><span class="line">Full_Backup;Add_Backup</span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>Shell</tag>
      </tags>
  </entry>
  <entry>
    <title>倾诉欲</title>
    <url>/2020/02/02/%E5%80%BE%E8%AF%89%E6%AC%B2/</url>
    <content><![CDATA[<h1 id="倾诉欲"><a href="#倾诉欲" class="headerlink" title="倾诉欲"></a>倾诉欲</h1><p>   每个人都会有困难的时候。</p><p>   有些困难看似不起眼，可它永远垒在那里，无时无刻不想着拌你一脚，你一时觉得无所谓，也许搬个铲子动土的时间，不如拿来赚更多的钱。</p><p>   可真当它动起火来，真将你绊倒在地的时候，你哗啦地翻下山坡，卷起后面一片沙尘，摔得你鼻青脸肿，随后再在山顶上瞧着你，嘲笑你还得上来。</p><a id="more"></a>


<p>   或者你觉得它太过危险，你注意到了后面的险山峻岭。可你此时此刻再无多余的心思去顾虑它，你双手抱住了一摞顶天的，不管是什么东西，背上背了沉重的背包，小腿以下甚至已经敷满了皑皑白雪。可你知道你迟早会遇到那颗扎根在泥土里的尖石头。</p>
<p>   你过分焦虑，你知道它越来越近，你知道它注定要扳倒你。你想尽办法躲开，也许是向左走一点，也许是向右多偏离一些，尽管可能高山上的暴风最终将让你迷失方向。</p>
<p>   突然你胸口挂着的通讯器的杂声消失了，那边传来了轻声呼吸，和一声问候。</p>
<p>   或许会让她顿时害怕，或许会让她马上调整新的频道，或许她会嫌弃你，或许她会说你无趣。你想过所有的可能，可你也憋不住了，你还是要向她倾诉，你说你马上就要迈过去了，可害怕又失败了。你说那个脑袋拔尖儿的玩意儿真不是个东西。</p>
<p>   她的一声轻笑，一声逗趣儿般的若怪你太榆木脑袋般的“笨蛋”，再轻轻地缓和呼吸。</p>
<p>   可她仍然再继续好奇，问你怎么还能被一小颗石头难倒了，想你翻过山之后能看到怎样的美景。突然觉得那个石头好像只是刚刚冒头的春笋，只是想向你打个招呼，想呼吸呼吸新鲜空气。突然觉得背着的哪里是背包，明明是背着那个不扭头就见不着模样，却散着清香，靠着耳边说着悄悄话，还有呼吸声，还有那轻轻的笑的女孩儿。脚边的雪一下子就化了，化成了拂过万千花丛的微风。手上抱着的，也是给她精心准备的什么礼物。</p>
<p>   你一直说，一口气将群山的蜿蜒曲折说给她听，一口气再将山脚的茂密树林和可爱鸟兽、和山腰转角的几支说不出名字的花和丛跟她描述的明明白白的。</p>
<p>   直到你真的攀上山顶，你意识到那边的她早就听的迷迷糊糊了，好像梦到了就站在你身边，看到了山后的风景。</p>
<p>   也许是海，也许是青葱绿林，也许是戈壁滩，也许是沙漠古迹，再或许，还是群山。</p>
<p>   可你意识到了，山后是什么，不重要。</p>
<p>   重要的是有人听着，一直听着。</p>
<hr>
<p><img src="images/1.jpg" alt title="说爱你的平铺直叙法"></p>
<hr>
]]></content>
      <tags>
        <tag>writing</tag>
      </tags>
  </entry>
  <entry>
    <title>Diary</title>
    <url>/2020/02/02/Diary-20200202/</url>
    <content><![CDATA[<h1 id="Diary-2020-02-02"><a href="#Diary-2020-02-02" class="headerlink" title="Diary 2020-02-02"></a>Diary 2020-02-02</h1><p>​    好多父母甚至根本不知道如何教育孩子，他们只是凭着一个身份和嘴上的爱，以及自私和懒惰在教育孩子。</p><p>​    他们期望他们可以不需要再付出就可以获得孩子的一切，获得孩子的收入养活自己，获得孩子的身份展开话题，获得孩子的自尊满足自己的虚荣。</p><p>​    他们大张旗鼓的夺走了孩子的灵魂。</p><a id="more"></a>


<p>​    孩子甚至还没有意识到。</p>
<p>​    就变成了父母的一条狗。</p>
]]></content>
      <tags>
        <tag>diary</tag>
      </tags>
  </entry>
  <entry>
    <title>First-Post</title>
    <url>/2020/02/02/First-Post/</url>
    <content><![CDATA[<h1 id="第一次发布博客"><a href="#第一次发布博客" class="headerlink" title="第一次发布博客"></a>第一次发布博客</h1><p>​    Hello World!</p><p>​    Hello this blog of mine!</p><p>​    This is the first time trying to post a new blog, and I have no idea what to say.</p><p>​    But I just can’t wait to do something in it.</p><a id="more"></a>



<p>​    I know I forget it a long time, and throw it to a corner even forget it.</p>
<p>​    Here is what I have to say, it’s too easy for me to post a blog without money, VIP or anything else. Programmer can do anything by himself!</p>
<hr>
<p>​    Here is the main sector of what I have to describe.</p>
<p>​    The site of my blog contains all of writing which I love or want to remember or just eager to write down.</p>
<p>​    It will include such as a diary, a span conclusion, and a little technology sharing.</p>
<p>​    Hope I can remember to write all down.</p>
<p>​    Hope you could find anything you like or approve! Thanks!</p>
<p>​    Anyway, good night, every one!</p>
]]></content>
      <categories>
        <category>writting</category>
      </categories>
      <tags>
        <tag>test</tag>
        <tag>writting</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2019/11/02/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><a id="more"></a>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>
]]></content>
  </entry>
</search>
